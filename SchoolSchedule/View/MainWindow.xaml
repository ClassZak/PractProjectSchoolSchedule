<Window x:Class="SchoolSchedule.View.MainWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:hc="https://handyorg.github.io/handycontrol"
		xmlns:local="clr-namespace:SchoolSchedule"
		xmlns:ViewModel="clr-namespace:SchoolSchedule.ViewModel"
		xmlns:Model="clr-namespace:SchoolSchedule.Model"
		xmlns:DTOModel="clr-namespace:SchoolSchedule.Model.DTO"
		mc:Ignorable="d"
		Icon="/Resources/scheduleicon.ico"
		Title="Школьное расписание" Height="400" Width="680"
		MinWidth="500"
		MinHeight="350"
		>
	<Grid>
		<Grid.DataContext>
			<ViewModel:MainViewModel/>
		</Grid.DataContext>
		<Grid.RowDefinitions>
			<RowDefinition Height="20"/>
			<RowDefinition/>
		</Grid.RowDefinitions>
		<Menu Grid.RowSpan="2">
			<MenuItem Header="Файл">
				<MenuItem Header="Загрузить">
					<MenuItem Header="Загрузить таблицу &quot;Ученики&quot; из сервера"			Command="{Binding UpdateDataAsync}" CommandParameter="{x:Type Model:Student}"		/>
					<MenuItem Header="Загрузить таблицу &quot;Учителя&quot; из сервера"			Command="{Binding UpdateDataAsync}" CommandParameter="{x:Type Model:Teacher}"		/>
					<MenuItem Header="Загрузить таблицу &quot;Номера учителей&quot; из сервера"	Command="{Binding UpdateDataAsync}" CommandParameter="{x:Type Model:TeacherPhone}"	/>
					<MenuItem Header="Загрузить таблицу &quot;Предметы&quot; из сервера"		Command="{Binding UpdateDataAsync}" CommandParameter="{x:Type Model:Subject}"		/>
					<MenuItem Header="Загрузить таблицу &quot;Классы&quot; из сервера"			Command="{Binding UpdateDataAsync}" CommandParameter="{x:Type Model:Group}"			/>
					<MenuItem Header="Загрузить таблицу &quot;Уроки&quot; из сервера"			Command="{Binding UpdateDataAsync}" CommandParameter="{x:Type Model:Lesson}"		/>
					<MenuItem Header="Загрузить таблицу &quot;Расписание&quot; из сервера"		Command="{Binding UpdateDataAsync}" CommandParameter="{x:Type Model:Schedule}"		/>
					<Separator/>
					<MenuItem Header="Загрузить все таблицы из сервера"							Command="{Binding UpdateDataAsync}"/>
				</MenuItem>
			</MenuItem>
		</Menu>
		<Grid Margin="6" Grid.Row="1">
			<Grid.RowDefinitions>
				<RowDefinition/>
				<RowDefinition Height="30"/>
			</Grid.RowDefinitions>
			<TabControl>
				<TabItem Header="Ученики">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>
						<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Students}">
							<DataGrid.ContextMenu>
								<ContextMenu>
									<MenuItem
										Header="Удалить"
										Command="{Binding DeleteCommand}"
										CommandParameter="{Binding Path=PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
									/>
								</ContextMenu>
							</DataGrid.ContextMenu>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Фамилия" Binding="{Binding Surname}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Имя" Binding="{Binding Name}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Отчество" Binding="{Binding Patronymic}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Класс" Binding="{Binding GroupLabel}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Электронная почта" Binding="{Binding Email}">
								</DataGridTextColumn>
								<DataGridTemplateColumn>
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button
												Content="Удалить"
												Command=
												"{Binding DataContext.DeleteCommand, 
												RelativeSource={RelativeSource AncestorType=DataGrid}}"
												CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}"
											/>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
						<Button
							Grid.Row="1"
							Margin="5"
							Content="Загрузить таблицу &quot;Ученики&quot; из сервера"
							Command="{Binding UpdateDataAsync}"
							CommandParameter="{x:Type DTOModel:DTOStudent}"
						/>
					</Grid>
				</TabItem>
				<TabItem Header="Учителя">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>
						<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Teachers}">
							<DataGrid.ContextMenu>
								<ContextMenu>
									<MenuItem
										Header="Удалить"
										Command="{Binding DeleteCommand}"
										CommandParameter="{Binding Path=PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
									/>
								</ContextMenu>
							</DataGrid.ContextMenu>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Фамилия" Binding="{Binding Surname}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Имя" Binding="{Binding Name}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Отчество" Binding="{Binding Patronymic}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Предмет(ы)" Binding="{Binding SubjectLabel}">
								</DataGridTextColumn>
								<DataGridTemplateColumn>
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button
												Content="Удалить"
												Command=
												"{Binding DataContext.DeleteCommand, 
												RelativeSource={RelativeSource AncestorType=DataGrid}}"
												CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}"
											/>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
						<Button
							Grid.Row="1"
							Margin="5"
							Content="Загрузить таблицу &quot;Учителя&quot; из сервера"
							Command="{Binding UpdateDataAsync}"
							CommandParameter="{x:Type DTOModel:DTOTeacher}"
						/>
					</Grid>
				</TabItem>
				<TabItem Header="Номера учителей">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>
						<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding TeacherPhones}">
							<DataGrid.ContextMenu>
								<ContextMenu>
									<MenuItem
										Header="Удалить"
										Command="{Binding DeleteCommand}"
										CommandParameter="{Binding Path=PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
									/>
								</ContextMenu>
							</DataGrid.ContextMenu>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Учитель" Binding="{Binding TeacherLabel}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Телефон" Binding="{Binding PhoneNumber}">
								</DataGridTextColumn>
								<DataGridTemplateColumn>
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button
												Content="Удалить"
												Command=
												"{Binding DataContext.DeleteCommand, 
												RelativeSource={RelativeSource AncestorType=DataGrid}}"
												CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}"
											/>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
						<Button
							Grid.Row="1"
							Margin="5"
							Content="Загрузить таблицу &quot;Номера учителей&quot; из сервера"
							Command="{Binding UpdateDataAsync}"
							CommandParameter="{x:Type DTOModel:DTOTeacherPhone}"
						/>
					</Grid>
				</TabItem>
				<TabItem Header="Предметы">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>
						<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Subjects}">
							<DataGrid.ContextMenu>
								<ContextMenu>
									<MenuItem
										Header="Удалить"
										Command="{Binding DeleteCommand}"
										CommandParameter="{Binding Path=PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
									/>
								</ContextMenu>
							</DataGrid.ContextMenu>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Название" Binding="{Binding Name}">
								</DataGridTextColumn>
								<DataGridTemplateColumn>
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button
												Content="Удалить"
												Command=
												"{Binding DataContext.DeleteCommand, 
												RelativeSource={RelativeSource AncestorType=DataGrid}}"
												CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}"
											/>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
						<Button
							Grid.Row="1"
							Margin="5"
							Content="Загрузить таблицу &quot;Предметы&quot; из сервера"
							Command="{Binding UpdateDataAsync}"
							CommandParameter="{x:Type Model:Subject}"
						/>
					</Grid>
				</TabItem>
				<TabItem Header="Классы">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>
						<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Groups}">
							<DataGrid.ContextMenu>
								<ContextMenu>
									<MenuItem
										Header="Удалить"
										Command="{Binding DeleteCommand}"
										CommandParameter="{Binding Path=PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
									/>
								</ContextMenu>
							</DataGrid.ContextMenu>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Год" Binding="{Binding Year}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Группа" Binding="{Binding Name}">
								</DataGridTextColumn>
								<DataGridTemplateColumn>
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button
												Content="Удалить"
												Command=
												"{Binding DataContext.DeleteCommand, 
												RelativeSource={RelativeSource AncestorType=DataGrid}}"
												CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}"
											/>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
						<Button 
							Grid.Row="1" 
							Margin="5" 
							Content="Загрузить таблицу &quot;Классы&quot; из сервера"
							Command="{Binding UpdateDataAsync}"
							CommandParameter="{x:Type Model:Group}"
						/>
					</Grid>
				</TabItem>
				<TabItem Header="Уроки">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>
						<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Lessons}">
							<DataGrid.ContextMenu>
								<ContextMenu>
									<MenuItem
										Header="Удалить"
										Command="{Binding DeleteCommand}"
										CommandParameter="{Binding Path=PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
									/>
								</ContextMenu>
							</DataGrid.ContextMenu>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Класс" Binding="{Binding GroupLabel}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Предмет" Binding="{Binding SubjectLabel}">
								</DataGridTextColumn>
								<DataGridTextColumn Header="Номер урока" Binding="{Binding Number}">
								</DataGridTextColumn>
								<DataGridTemplateColumn>
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button
												Content="Удалить"
												Command=
												"{Binding DataContext.DeleteCommand, 
												RelativeSource={RelativeSource AncestorType=DataGrid}}"
												CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}"
											/>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
						<Button
							Grid.Row="1"
							Margin="5"
							Content="Загрузить таблицу &quot;Уроки&quot; из сервера"
							Command="{Binding UpdateDataAsync}"
							CommandParameter="{x:Type Model:Lesson}"
						/>
					</Grid>
				</TabItem>
				<TabItem Header="Расписание">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition Height="30"/>
						</Grid.RowDefinitions>
						<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Schedules}">
							<DataGrid.ContextMenu>
								<ContextMenu>
									<MenuItem
										Header="Удалить"
										Command="{Binding DeleteCommand}"
										CommandParameter="{Binding Path=PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
									/>
								</ContextMenu>
							</DataGrid.ContextMenu>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Предмет" Binding="{Binding Subject}"/>
								<DataGridTextColumn Header="Класс" Binding="{Binding Group}"/>
								<DataGridTextColumn Header="Номер урока" Binding="{Binding Number}"/>
								<DataGridTextColumn Header="Фамилия учителя" Binding="{Binding Surname}"/>
								<DataGridTextColumn Header="Имя учителя" Binding="{Binding Name}"/>
								<DataGridTextColumn Header="Отчество учителя" Binding="{Binding Patronymic}"/>
								<DataGridTextColumn Header="Время начала" Binding="{Binding StartTime}"/>
								<DataGridTextColumn Header="Время завершения" Binding="{Binding EndTime}"/>
								<DataGridTextColumn Header="Дата проведения" Binding="{Binding Date}"/>
								<DataGridTemplateColumn>
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button
												Content="Удалить"
												Command=
												"{Binding DataContext.DeleteCommand, 
												RelativeSource={RelativeSource AncestorType=DataGrid}}"
												CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}"
											/>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
						<Button 
							Grid.Row="1"
							Margin="5"
							Content="Загрузить таблицу &quot;Расписание&quot; из сервера"
							Command="{Binding UpdateDataAsync}"
							CommandParameter="{x:Type Model:Schedule}"
						/>
					</Grid>
				</TabItem>
			</TabControl>


			<Grid Grid.Row="1" Margin="0,5,0,5">
				<Grid>
					<Button 
						Content="Загрузить все данные"
						Command="{Binding UpdateDataAsync}"
						CommandParameter="{x:Null}"
					/>
				</Grid>
			</Grid>
		</Grid>
	</Grid>
</Window>
